!function(){"use strict";var e=class{constructor(e,t){this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._form=t,this._buttonElement=this._form.querySelector(this._submitButtonSelector),this._inputElements=[...this._form.querySelectorAll(this._inputSelector)]}_showInputError(e){const t=this._form.querySelector(`#${e.id}-error`);e.classList.add(this._inputErrorClass),t.textContent=e.validationMessage,t.classList.add(this._errorClass)}_hideInputError(e){const t=this._form.querySelector(`#${e.id}-error`);e.classList.remove(this._inputErrorClass),t.textContent="",t.classList.remove(this._errorClass)}resetValidation(){this._inputElements.forEach((e=>{this._hideInputError(e)})),this.toggleButtonState()}toggleButtonState(){this._hasInvalidInput()?this._disableButton():this._enableButton()}_hasInvalidInput(){return this._inputElements.some((e=>!e.validity.valid))}_checkInputValidity(e){e.validity.valid?this._hideInputError(e):this._showInputError(e)}_disableButton(){this._buttonElement.classList.add(this._inactiveButtonClass),this._buttonElement.disabled=!0}_enableButton(){this._buttonElement.classList.remove(this._inactiveButtonClass),this._buttonElement.disabled=!1}_setEventListeners(){this._inputElements.forEach((e=>{e.addEventListener("input",(()=>{this._checkInputValidity(e),this.toggleButtonState()}))}))}enableValidation(){this._form.addEventListener("submit",(e=>{e.preventDefault()})),this._setEventListeners(),this.toggleButtonState()}};class t{constructor(e,t,n){this._name=e.name,this._link=e.link,this._cardSelector=t,this._handleCardClick=n}_getTemplate(){return this._cardTemplate=document.querySelector(this._cardSelector).content.querySelector(".card").cloneNode(!0),this._cardTemplate}_toggleLikeButton(){this._cardElement.querySelector(".card__like-button").classList.toggle("card__like-button_active")}_deleteCard(){this._cardElement.remove()}_setEventListeners(){this._cardElement.querySelector(".card__like-button").addEventListener("click",(()=>{this._toggleLikeButton()})),this._cardElement.querySelector(".card__delete-button").addEventListener("click",(()=>{this._deleteCard()})),this._cardElement.querySelector(".card__image").addEventListener("click",(()=>{this._handleCardClick({name:this._name,link:this._link})}))}generateCard(){return this._cardElement=this._getTemplate(),this._setEventListeners(),this._cardElement.querySelector(".card__image").alt=this._name,this._cardElement.querySelector(".card__image").src=this._link,this._cardElement.querySelector(".card__title").textContent=this._name,this._cardElement}}class n{constructor(e){let{popupSelector:t}=e;this._popupElement=t,this._handleEscClose=this._handleEscClose.bind(this),this._closeClick=this._closeClick.bind(this)}open(){this._popupElement.classList.add("modal_opened"),document.addEventListener("keydown",this._handleEscClose)}close(){this._popupElement.classList.remove("modal_opened"),document.removeEventListener("keydown",this._handleEscClose)}_handleEscClose(e){"Escape"===e.key&&this.close()}_closeClick(e){(e.target.classList.contains("modal_opened")||e.target.classList.contains("modal__close"))&&this.close()}setEventListeners(){this._popupElement.addEventListener("click",this._closeClick)}}class s extends n{constructor(e,t){super({popupSelector:e}),this._handleFormSubmit=t,this._popupForm=this._popupElement.querySelector(".modal__form")}_getInputValues(){const e=this._popupForm.querySelectorAll(".modal__input"),t={};return e.forEach((e=>{t[e.name]=e.value})),t}setEventListeners(){this._popupForm.addEventListener("submit",(()=>{const e=this._getInputValues();this._handleFormSubmit(e)})),super.setEventListeners()}close(){this._popupForm.reset(),super.close()}}const o=document.querySelector("#profile-edit-modal"),r=document.querySelector("#profile-add-modal"),i=document.querySelector("#profile-edit-button"),l=document.querySelector("#profile-add-button"),a=(document.querySelector(".profile__title"),document.querySelector(".profile__description"),document.querySelector("#profile-description-input")),c=document.querySelector("#profile-title-input"),u=document.querySelector("#preview-image-modal"),d={inputSelector:".modal__input",submitButtonSelector:".modal__button",inactiveButtonClass:"modal__button_disabled",inputErrorClass:"modal__input_type_error",errorClass:"modal__error_visible"},m=new e(d,o),_=new e(d,r);m.enableValidation(),_.enableValidation();const p=new class{constructor(e){let{nameSelector:t,jobSelector:n}=e;this.nameElement=document.querySelector(t),this.jobElement=document.querySelector(n)}getUserInfo(){return{name:this.nameElement.textContent,job:this.jobElement.textContent}}setUserInfo(e){let{title:t,job:n}=e;this.nameElement.textContent=t,this.jobElement.textContent=n}}({nameSelector:".profile__title",jobSelector:".profile__description"}),h=new s(o,(e=>{let{title:t,description:n}=e;p.setUserInfo({title:t,job:n}),h.close()}));i.addEventListener("click",(function(){const{name:e,job:t}=p.getUserInfo();c.value=e,a.value=t,m.toggleButtonState(),h.open()})),h.setEventListeners();const E=new class{constructor(e,t){let{items:n,renderer:s}=e;this._renderItems=n,this._renderer=s,this._container=document.querySelector(t)}renderItems(){this._renderItems.forEach((e=>{this._renderer(e)}))}addItem(e){this._container.append(e)}prependItem(e){this._container.prepend(e)}}({items:[{name:"Yosemite Valley",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/yosemite.jpg"},{name:"Lake Louise",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lake-louise.jpg"},{name:"Bald Mountains",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/bald-mountains.jpg"},{name:"Latemar",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/latemar.jpg"},{name:"Vanoise National Park",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/vanoise.jpg"},{name:"Lago di Braies",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lago.jpg"}],renderer:e=>{let{name:t,link:n}=e;const s=v({name:t,link:n});E.addItem(s)}},".cards__list");E.renderItems();const S=new s(r,(function(e){let{title:t,url:n}=e;const s=v({name:t,link:n});E.prependItem(s),S.close()})),g=new class extends n{constructor(e){super({popupSelector:e}),this._previewImageElement=document.querySelector(".modal__image"),this._previewImageCaption=document.querySelector(".modal__caption")}open(e){let{name:t,link:n}=e;this._previewImageElement.alt=t,this._previewImageCaption.textContent=t,this._previewImageElement.src=n,super.open()}}(u);function v(e){let{name:n,link:s}=e;const o=new t({name:n,link:s},"#card-template",(e=>{let{name:t,link:n}=e;g.open({name:t,link:n})}));return o.generateCard()}g.setEventListeners(),l.addEventListener("click",(()=>{_.toggleButtonState(),S.open()})),S.setEventListeners()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QU0sQ0FBRUssT0FBTUUsUUFBTyxrQkFBa0IwRixJQUFvQixJQUFuQixLQUFFNUYsRUFBSSxLQUFFRSxHQUFNMEYsRUFDNUVMLEVBQWtCL0QsS0FBSyxDQUFFeEIsT0FBTUUsUUFBTSxJQUV2QyxPQUFPeUYsRUFBWTdFLGNBQ3JCLENBbEJBeUUsRUFBa0J2RCxvQkFFbEJnQixFQUFjekQsaUJBQWlCLFNBQVMsS0FDdENnRSxFQUFpQjFFLG9CQUNqQnVHLEVBQWE1RCxNQUFNLElBR3BCNEQsRUFBYXBELG1CIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9DYXJkLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1BvcHVwLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL3V0aWxzL2NvbnN0YW50cy5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvcGFnZXMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvVXNlckluZm8uanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvU2VjdGlvbi5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjbGFzcyBGb3JtVmFsaWRhdG9yIHtcbiAgY29uc3RydWN0b3Ioc2V0dGluZ3MsIGZvcm1FbGVtZW50KSB7XG4gICAgdGhpcy5faW5wdXRTZWxlY3RvciA9IHNldHRpbmdzLmlucHV0U2VsZWN0b3I7XG4gICAgdGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3IgPSBzZXR0aW5ncy5zdWJtaXRCdXR0b25TZWxlY3RvcjtcbiAgICB0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzID0gc2V0dGluZ3MuaW5hY3RpdmVCdXR0b25DbGFzcztcbiAgICB0aGlzLl9pbnB1dEVycm9yQ2xhc3MgPSBzZXR0aW5ncy5pbnB1dEVycm9yQ2xhc3M7XG4gICAgdGhpcy5fZXJyb3JDbGFzcyA9IHNldHRpbmdzLmVycm9yQ2xhc3M7XG4gICAgdGhpcy5fZm9ybSA9IGZvcm1FbGVtZW50O1xuICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IodGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3IpO1xuXG4gICAgdGhpcy5faW5wdXRFbGVtZW50cyA9IFsuLi50aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5faW5wdXRTZWxlY3RvcildO1xuICB9XG5cbiAgX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCkge1xuICAgIGNvbnN0IGVycm9yTWVzc2FnZUVsZW0gPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IoYCMke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgKTtcbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xuICAgIGVycm9yTWVzc2FnZUVsZW0udGV4dENvbnRlbnQgPSBpbnB1dEVsZW1lbnQudmFsaWRhdGlvbk1lc3NhZ2U7XG4gICAgZXJyb3JNZXNzYWdlRWxlbS5jbGFzc0xpc3QuYWRkKHRoaXMuX2Vycm9yQ2xhc3MpO1xuICB9XG5cbiAgX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCkge1xuICAgIGNvbnN0IGVycm9yTWVzc2FnZUVsZW0gPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IoYCMke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgKTtcbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xuICAgIGVycm9yTWVzc2FnZUVsZW0udGV4dENvbnRlbnQgPSBcIlwiO1xuICAgIGVycm9yTWVzc2FnZUVsZW0uY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9lcnJvckNsYXNzKTtcbiAgfVxuXG4gIHJlc2V0VmFsaWRhdGlvbigpIHtcbiAgICB0aGlzLl9pbnB1dEVsZW1lbnRzLmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcbiAgICB9KTtcblxuICAgIHRoaXMudG9nZ2xlQnV0dG9uU3RhdGUoKTtcbiAgfVxuXG4gIHRvZ2dsZUJ1dHRvblN0YXRlKCkge1xuICAgIGlmICh0aGlzLl9oYXNJbnZhbGlkSW5wdXQoKSkge1xuICAgICAgdGhpcy5fZGlzYWJsZUJ1dHRvbigpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9lbmFibGVCdXR0b24oKTtcbiAgICB9XG4gIH1cblxuICBfaGFzSW52YWxpZElucHV0KCkge1xuICAgIHJldHVybiB0aGlzLl9pbnB1dEVsZW1lbnRzLnNvbWUoKGlucHV0RWxlbWVudCkgPT4ge1xuICAgICAgcmV0dXJuICFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQ7XG4gICAgfSk7XG4gIH1cblxuICBfY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWxlbWVudCkge1xuICAgIGlmICghaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkKSB7XG4gICAgICB0aGlzLl9zaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xuICAgIH1cbiAgfVxuXG4gIF9kaXNhYmxlQnV0dG9uKCkge1xuICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcbiAgICB0aGlzLl9idXR0b25FbGVtZW50LmRpc2FibGVkID0gdHJ1ZTtcbiAgfVxuXG4gIF9lbmFibGVCdXR0b24oKSB7XG4gICAgdGhpcy5fYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xuICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuZGlzYWJsZWQgPSBmYWxzZTtcbiAgfVxuXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLl9pbnB1dEVsZW1lbnRzLmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xuICAgICAgaW5wdXRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoKSA9PiB7XG4gICAgICAgIHRoaXMuX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsZW1lbnQpO1xuICAgICAgICB0aGlzLnRvZ2dsZUJ1dHRvblN0YXRlKCk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIGVuYWJsZVZhbGlkYXRpb24oKSB7XG4gICAgdGhpcy5fZm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChldnQpID0+IHtcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIH0pO1xuXG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgICB0aGlzLnRvZ2dsZUJ1dHRvblN0YXRlKCk7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgRm9ybVZhbGlkYXRvcjtcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIENhcmQge1xuICBjb25zdHJ1Y3RvcihjYXJkRGF0YSwgY2FyZFNlbGVjdG9yLCBoYW5kbGVDYXJkQ2xpY2spIHtcbiAgICB0aGlzLl9uYW1lID0gY2FyZERhdGEubmFtZTtcbiAgICB0aGlzLl9saW5rID0gY2FyZERhdGEubGluaztcbiAgICB0aGlzLl9jYXJkU2VsZWN0b3IgPSBjYXJkU2VsZWN0b3I7XG4gICAgdGhpcy5faGFuZGxlQ2FyZENsaWNrID0gaGFuZGxlQ2FyZENsaWNrO1xuICB9XG5cbiAgX2dldFRlbXBsYXRlKCkge1xuICAgIHRoaXMuX2NhcmRUZW1wbGF0ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5fY2FyZFNlbGVjdG9yKS5jb250ZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZFwiKS5jbG9uZU5vZGUodHJ1ZSk7XG4gICAgcmV0dXJuIHRoaXMuX2NhcmRUZW1wbGF0ZTtcbiAgfVxuXG4gIF90b2dnbGVMaWtlQnV0dG9uKCkge1xuICAgIHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYXJkX19saWtlLWJ1dHRvbicpLmNsYXNzTGlzdC50b2dnbGUoJ2NhcmRfX2xpa2UtYnV0dG9uX2FjdGl2ZScpXG4gIH1cblxuICBfZGVsZXRlQ2FyZCgpIHtcbiAgICB0aGlzLl9jYXJkRWxlbWVudC5yZW1vdmUoKTtcbiAgfVxuXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcbiAgICBjb25zdCBsaWtlQnV0dG9uID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19saWtlLWJ1dHRvblwiKTtcbiAgICBsaWtlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICB0aGlzLl90b2dnbGVMaWtlQnV0dG9uKCk7XG4gICAgfSk7XG5cbiAgICBjb25zdCBkZWxldGVCdXR0b24gPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2RlbGV0ZS1idXR0b25cIik7XG4gICAgZGVsZXRlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICB0aGlzLl9kZWxldGVDYXJkKCk7XG4gICAgfSk7XG5cbiAgICBjb25zdCBjYXJkSW1hZ2UgPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2ltYWdlXCIpO1xuICAgIGNhcmRJbWFnZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgdGhpcy5faGFuZGxlQ2FyZENsaWNrKHsgbmFtZTogdGhpcy5fbmFtZSwgbGluazogdGhpcy5fbGluayB9KTsgXG4gICAgfSk7XG4gIH1cblxuICBnZW5lcmF0ZUNhcmQoKSB7XG4gICAgdGhpcy5fY2FyZEVsZW1lbnQgPSB0aGlzLl9nZXRUZW1wbGF0ZSgpO1xuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19pbWFnZVwiKS5hbHQgPSB0aGlzLl9uYW1lO1xuICAgIHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9faW1hZ2VcIikuc3JjID0gdGhpcy5fbGluaztcbiAgICB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX3RpdGxlXCIpLnRleHRDb250ZW50ID0gdGhpcy5fbmFtZTtcblxuICAgIHJldHVybiB0aGlzLl9jYXJkRWxlbWVudDtcbiAgfVxufVxuXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHsgcG9wdXBTZWxlY3RvciB9KSB7XG4gICAgdGhpcy5fcG9wdXBFbGVtZW50ID0gcG9wdXBTZWxlY3RvcjtcbiAgICB0aGlzLl9oYW5kbGVFc2NDbG9zZSA9IHRoaXMuX2hhbmRsZUVzY0Nsb3NlLmJpbmQodGhpcyk7XG4gICAgdGhpcy5fY2xvc2VDbGljayA9IHRoaXMuX2Nsb3NlQ2xpY2suYmluZCh0aGlzKTtcbiAgfVxuXG4gIG9wZW4oKSB7XG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmNsYXNzTGlzdC5hZGQoJ21vZGFsX29wZW5lZCcpO1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XG4gIH1cblxuICBjbG9zZSgpIHtcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSgnbW9kYWxfb3BlbmVkJyk7XG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcbiAgfVxuXG4gIF9oYW5kbGVFc2NDbG9zZShldmVudCkge1xuICAgIGlmIChldmVudC5rZXkgPT09ICdFc2NhcGUnKSB7XG4gICAgICB0aGlzLmNsb3NlKCk7XG4gICAgfVxuICB9XG5cbiAgX2Nsb3NlQ2xpY2soZSkge1xuICAgIGlmIChlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ21vZGFsX29wZW5lZCcpIHx8IGUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnbW9kYWxfX2Nsb3NlJykpIHtcbiAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICB9XG4gIH1cblxuICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLl9jbG9zZUNsaWNrKTtcbiAgfVxufVxuIiwiaW1wb3J0IFBvcHVwIGZyb20gJy4uL2NvbXBvbmVudHMvUG9wdXAnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhGb3JtIGV4dGVuZHMgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yLCBoYW5kbGVGb3JtU3VibWl0KSB7XG4gICAgc3VwZXIoeyBwb3B1cFNlbGVjdG9yIH0pO1xuICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQgPSBoYW5kbGVGb3JtU3VibWl0O1xuICAgIHRoaXMuX3BvcHVwRm9ybSA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcubW9kYWxfX2Zvcm0nKTtcbiAgfVxuXG4gIF9nZXRJbnB1dFZhbHVlcygpIHtcbiAgICBjb25zdCBpbnB1dHMgPSB0aGlzLl9wb3B1cEZvcm0ucXVlcnlTZWxlY3RvckFsbCgnLm1vZGFsX19pbnB1dCcpO1xuICAgIGNvbnN0IHZhbHVlcyA9IHt9O1xuICAgIGlucHV0cy5mb3JFYWNoKGlucHV0ID0+IHtcbiAgICAgIHZhbHVlc1tpbnB1dC5uYW1lXSA9IGlucHV0LnZhbHVlO1xuICAgIH0pO1xuICAgIHJldHVybiB2YWx1ZXM7XG4gIH1cblxuICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLl9wb3B1cEZvcm0uYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgKCkgPT4ge1xuICAgICAgY29uc3QgaW5wdXRWYWx1ZXMgPSB0aGlzLl9nZXRJbnB1dFZhbHVlcygpO1xuICAgICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdChpbnB1dFZhbHVlcyk7XG4gICAgfSk7XG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgfVxuXG4gIGNsb3NlKCkge1xuICAgIHRoaXMuX3BvcHVwRm9ybS5yZXNldCgpO1xuICAgIHN1cGVyLmNsb3NlKCk7XG4gIH1cbn1cbiIsImV4cG9ydCBjb25zdCBpbml0aWFsQ2FyZHMgPSBbXG4gICAge1xuICAgICAgbmFtZTogJ1lvc2VtaXRlIFZhbGxleScsXG4gICAgICBsaW5rOiAnaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC95b3NlbWl0ZS5qcGcnLFxuICAgIH0sXG4gICAge1xuICAgICAgbmFtZTogJ0xha2UgTG91aXNlJyxcbiAgICAgIGxpbms6ICdodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2xha2UtbG91aXNlLmpwZycsXG4gICAgfSxcbiAgICB7XG4gICAgICBuYW1lOiAnQmFsZCBNb3VudGFpbnMnLFxuICAgICAgbGluazogJ2h0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvYmFsZC1tb3VudGFpbnMuanBnJyxcbiAgICB9LFxuICAgIHtcbiAgICAgIG5hbWU6ICdMYXRlbWFyJyxcbiAgICAgIGxpbms6ICdodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2xhdGVtYXIuanBnJyxcbiAgICB9LFxuICAgIHtcbiAgICAgIG5hbWU6ICdWYW5vaXNlIE5hdGlvbmFsIFBhcmsnLFxuICAgICAgbGluazogJ2h0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvdmFub2lzZS5qcGcnLFxuICAgIH0sXG4gICAge1xuICAgICAgbmFtZTogJ0xhZ28gZGkgQnJhaWVzJyxcbiAgICAgIGxpbms6ICdodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2xhZ28uanBnJyxcbiAgICB9LFxuICBdO1xuXG4gIGV4cG9ydCBjb25zdCBwcm9maWxlRWRpdE1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlLWVkaXQtbW9kYWxcIik7XG4gIGV4cG9ydCBjb25zdCBwcm9maWxlQWRkTW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGUtYWRkLW1vZGFsXCIpO1xuICBleHBvcnQgY29uc3QgcHJvZmlsZUVkaXRCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGUtZWRpdC1idXR0b25cIik7XG4gIGV4cG9ydCBjb25zdCBwcm9maWxlQWRkQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlLWFkZC1idXR0b25cIik7XG4gIGV4cG9ydCBjb25zdCBwcm9maWxlVGl0bGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX3RpdGxlXCIpO1xuICBleHBvcnQgY29uc3QgcHJvZmlsZURlc2NyaXB0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19kZXNjcmlwdGlvblwiKTtcbiAgZXhwb3J0IGNvbnN0IHByb2ZpbGVEZXNjcmlwdGlvbklucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlLWRlc2NyaXB0aW9uLWlucHV0XCIpO1xuICBleHBvcnQgY29uc3QgcHJvZmlsZVRpdGxlSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGUtdGl0bGUtaW5wdXRcIik7XG4gIGV4cG9ydCBjb25zdCBjYXJkTGlzdEVsID0gXCIuY2FyZHNfX2xpc3RcIjtcbiAgZXhwb3J0IGNvbnN0IHByZXZpZXdJbWFnZU1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcmV2aWV3LWltYWdlLW1vZGFsXCIpO1xuICBleHBvcnQgY29uc3QgaW5wdXRTZWxlY3RvciA9ICcubW9kYWxfX2lucHV0JztcbiAgXG4gIGV4cG9ydCBjb25zdCB2YWxpZGF0aW9uU2V0dGluZ3MgPSB7XG4gICAgaW5wdXRTZWxlY3RvcjogXCIubW9kYWxfX2lucHV0XCIsXG4gICAgc3VibWl0QnV0dG9uU2VsZWN0b3I6IFwiLm1vZGFsX19idXR0b25cIixcbiAgICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiBcIm1vZGFsX19idXR0b25fZGlzYWJsZWRcIixcbiAgICBpbnB1dEVycm9yQ2xhc3M6IFwibW9kYWxfX2lucHV0X3R5cGVfZXJyb3JcIixcbiAgICBlcnJvckNsYXNzOiBcIm1vZGFsX19lcnJvcl92aXNpYmxlXCIsXG4gIH07XG5cbiIsImltcG9ydCAnLi4vcGFnZXMvaW5kZXguY3NzJztcbmltcG9ydCBGb3JtVmFsaWRhdG9yIGZyb20gXCIuLi9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanNcIjtcbmltcG9ydCBDYXJkIGZyb20gXCIuLi9jb21wb25lbnRzL0NhcmQuanNcIjtcbmltcG9ydCBQb3B1cFdpdGhGb3JtIGZyb20gJy4uL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyc7XG5pbXBvcnQgUG9wdXBXaXRoSW1hZ2UgZnJvbSAnLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcydcbmltcG9ydCBVc2VySW5mbyBmcm9tICcuLi9jb21wb25lbnRzL1VzZXJJbmZvLmpzJztcbmltcG9ydCBTZWN0aW9uIGZyb20gJy4uL2NvbXBvbmVudHMvU2VjdGlvbi5qcyc7XG5pbXBvcnQge1xuICBpbml0aWFsQ2FyZHMsXG4gIHZhbGlkYXRpb25TZXR0aW5ncyxcbiAgcHJvZmlsZUVkaXRNb2RhbCxcbiAgcHJvZmlsZUFkZE1vZGFsLFxuICBwcm9maWxlRWRpdEJ0bixcbiAgcHJvZmlsZUFkZEJ0bixcbiAgcHJvZmlsZVRpdGxlLFxuICBwcm9maWxlRGVzY3JpcHRpb25JbnB1dCxcbiAgcHJvZmlsZVRpdGxlSW5wdXQsXG4gIHByb2ZpbGVEZXNjcmlwdGlvbixcbiAgY2FyZExpc3RFbCxcbiAgcHJldmlld0ltYWdlTW9kYWwsXG59IGZyb20gJy4uL3V0aWxzL2NvbnN0YW50cy5qcyc7XG5cbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG4vKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBGb3JtIFZhbGlkYXRvciAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqL1xuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblxuY29uc3QgZWRpdEZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcih2YWxpZGF0aW9uU2V0dGluZ3MsIHByb2ZpbGVFZGl0TW9kYWwpO1xuY29uc3QgYWRkRm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKHZhbGlkYXRpb25TZXR0aW5ncywgcHJvZmlsZUFkZE1vZGFsKTtcbmVkaXRGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcbmFkZEZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xuXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuLyogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFByb2ZpbGUgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKi9cbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cbmNvbnN0IHVzZXJJbmZvID0gbmV3IFVzZXJJbmZvKHtcbiAgbmFtZVNlbGVjdG9yOiAnLnByb2ZpbGVfX3RpdGxlJywgXG4gIGpvYlNlbGVjdG9yOiAnLnByb2ZpbGVfX2Rlc2NyaXB0aW9uJ1xufSk7XG5cbmNvbnN0IGVkaXRQcm9maWxlUG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybShwcm9maWxlRWRpdE1vZGFsLCAoeyB0aXRsZSwgZGVzY3JpcHRpb24gfSkgPT4ge1xuICB1c2VySW5mby5zZXRVc2VySW5mbyh7IHRpdGxlLCBqb2I6IGRlc2NyaXB0aW9uIH0pO1xuICBlZGl0UHJvZmlsZVBvcHVwLmNsb3NlKCk7XG59KTtcblxucHJvZmlsZUVkaXRCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBvcGVuUHJvZmlsZVBvcHVwKTtcblxuZnVuY3Rpb24gb3BlblByb2ZpbGVQb3B1cCgpIHtcbiAgY29uc3QgeyBuYW1lLCBqb2IgfSA9IHVzZXJJbmZvLmdldFVzZXJJbmZvKCk7XG4gIHByb2ZpbGVUaXRsZUlucHV0LnZhbHVlID0gbmFtZTtcbiAgcHJvZmlsZURlc2NyaXB0aW9uSW5wdXQudmFsdWUgPSBqb2I7XG4gIGVkaXRGb3JtVmFsaWRhdG9yLnRvZ2dsZUJ1dHRvblN0YXRlKCk7XG4gIGVkaXRQcm9maWxlUG9wdXAub3BlbigpO1xufVxuXG5lZGl0UHJvZmlsZVBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG4vKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgU2VjdGlvbiBDbGFzcyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqL1xuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblxuY29uc3QgY2FyZExpc3RTZWN0aW9uID0gbmV3IFNlY3Rpb24oXG4gIHtcbiAgICBpdGVtczogaW5pdGlhbENhcmRzLFxuICAgIHJlbmRlcmVyOiAoeyBuYW1lLCBsaW5rIH0pID0+IHtcbiAgICAgIGNvbnN0IG5ld0NhcmQgPSBjcmVhdGVDYXJkKHsgbmFtZSwgbGluayB9KTtcbiAgICAgIGNhcmRMaXN0U2VjdGlvbi5hZGRJdGVtKG5ld0NhcmQpO1xuICAgIH0sXG4gIH0sXG4gIGNhcmRMaXN0RWxcbik7XG5cbmNhcmRMaXN0U2VjdGlvbi5yZW5kZXJJdGVtcygpO1xuXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuLyogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFBvcHVwV2l0aEZvcm0gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKi9cbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cbmNvbnN0IG5ld0NhcmRQb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKHByb2ZpbGVBZGRNb2RhbCwgc3VibWl0Q2FyZCk7XG5jb25zdCBwcmV2aWV3SW1hZ2VQb3B1cCA9IG5ldyBQb3B1cFdpdGhJbWFnZShwcmV2aWV3SW1hZ2VNb2RhbCk7XG5wcmV2aWV3SW1hZ2VQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xuXG5wcm9maWxlQWRkQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICBhZGRGb3JtVmFsaWRhdG9yLnRvZ2dsZUJ1dHRvblN0YXRlKCk7XG4gIG5ld0NhcmRQb3B1cC5vcGVuKCk7XG59KVxuXG4gbmV3Q2FyZFBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG4vKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQ2FyZCBGdW5jdGlvbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqL1xuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblxuZnVuY3Rpb24gY3JlYXRlQ2FyZCAoeyBuYW1lLCBsaW5rIH0pIHtcbiAgY29uc3QgY2FyZEVsZW1lbnQgPSBuZXcgQ2FyZCAoeyBuYW1lLCBsaW5rfSwgJyNjYXJkLXRlbXBsYXRlJywgKHsgbmFtZSwgbGluayB9KSA9PiB7XG4gICAgcHJldmlld0ltYWdlUG9wdXAub3Blbih7IG5hbWUsIGxpbmt9KTtcbiAgfSk7XG4gIHJldHVybiBjYXJkRWxlbWVudC5nZW5lcmF0ZUNhcmQoKTtcbn0gXG5cbmZ1bmN0aW9uIHN1Ym1pdENhcmQoeyB0aXRsZSwgdXJsIH0pIHtcbiAgY29uc3QgbmV3Q2FyZERhdGEgPSB7IG5hbWU6IHRpdGxlLCBsaW5rOiB1cmwgfTtcbiAgY29uc3QgbmV3Q2FyZCA9IGNyZWF0ZUNhcmQobmV3Q2FyZERhdGEpO1xuICBjYXJkTGlzdFNlY3Rpb24ucHJlcGVuZEl0ZW0obmV3Q2FyZCk7XG4gIG5ld0NhcmRQb3B1cC5jbG9zZSgpO1xufSIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFVzZXJJbmZvIHtcbiAgICBjb25zdHJ1Y3Rvcih7IG5hbWVTZWxlY3Rvciwgam9iU2VsZWN0b3IgfSkge1xuICAgICAgdGhpcy5uYW1lRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IobmFtZVNlbGVjdG9yKTtcbiAgICAgIHRoaXMuam9iRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioam9iU2VsZWN0b3IpO1xuICAgIH1cbiAgXG4gICAgZ2V0VXNlckluZm8oKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBuYW1lOiB0aGlzLm5hbWVFbGVtZW50LnRleHRDb250ZW50LFxuICAgICAgICBqb2I6IHRoaXMuam9iRWxlbWVudC50ZXh0Q29udGVudFxuICAgICAgfTtcbiAgICB9XG4gIFxuICAgIHNldFVzZXJJbmZvKHsgdGl0bGUsIGpvYiB9KSB7XG4gICAgICB0aGlzLm5hbWVFbGVtZW50LnRleHRDb250ZW50ID0gdGl0bGU7XG4gICAgICB0aGlzLmpvYkVsZW1lbnQudGV4dENvbnRlbnQgPSBqb2I7XG4gICAgfVxuICB9XG4gICIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFNlY3Rpb24ge1xuICAgIGNvbnN0cnVjdG9yKHsgaXRlbXMsIHJlbmRlcmVyIH0sIGNvbnRhaW5lclNlbGVjdG9yKSB7XG4gICAgICB0aGlzLl9yZW5kZXJJdGVtcyA9IGl0ZW1zO1xuICAgICAgdGhpcy5fcmVuZGVyZXIgPSByZW5kZXJlcjtcbiAgICAgIHRoaXMuX2NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoY29udGFpbmVyU2VsZWN0b3IpO1xuICAgIH1cbiAgXG4gICAgcmVuZGVySXRlbXMoKSB7XG4gICAgICB0aGlzLl9yZW5kZXJJdGVtcy5mb3JFYWNoKChpdGVtKSA9PiB7XG4gICAgICAgIHRoaXMuX3JlbmRlcmVyKGl0ZW0pO1xuICAgICAgfSk7XG4gICAgfVxuICBcbiAgICBhZGRJdGVtKGVsZW1lbnQpIHtcbiAgICAgIHRoaXMuX2NvbnRhaW5lci5hcHBlbmQoZWxlbWVudCk7XG4gICAgfVxuXG4gICAgcHJlcGVuZEl0ZW0oZWxlbWVudCkge1xuICAgICAgdGhpcy5fY29udGFpbmVyLnByZXBlbmQoZWxlbWVudCk7XG4gICAgfVxuICB9XG4gICIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhJbWFnZSBleHRlbmRzIFBvcHVwe1xuICAgIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcbiAgICAgICAgc3VwZXIoeyBwb3B1cFNlbGVjdG9yIH0pO1xuICAgICAgICB0aGlzLl9wcmV2aWV3SW1hZ2VFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1vZGFsX19pbWFnZScpO1xuICAgICAgICB0aGlzLl9wcmV2aWV3SW1hZ2VDYXB0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1vZGFsX19jYXB0aW9uJyk7XG4gICAgfVxuXG4gICAgb3Blbih7IG5hbWUsIGxpbmsgfSkge1xuICAgICAgICB0aGlzLl9wcmV2aWV3SW1hZ2VFbGVtZW50LmFsdCA9IG5hbWU7XG4gICAgICAgIHRoaXMuX3ByZXZpZXdJbWFnZUNhcHRpb24udGV4dENvbnRlbnQgPSBuYW1lO1xuICAgICAgICB0aGlzLl9wcmV2aWV3SW1hZ2VFbGVtZW50LnNyYyA9IGxpbms7XG4gICAgICAgIHN1cGVyLm9wZW4oKTtcbiAgICB9XG59Il0sIm5hbWVzIjpbImNvbnN0cnVjdG9yIiwic2V0dGluZ3MiLCJmb3JtRWxlbWVudCIsInRoaXMiLCJfaW5wdXRTZWxlY3RvciIsImlucHV0U2VsZWN0b3IiLCJfc3VibWl0QnV0dG9uU2VsZWN0b3IiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsIl9pbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsIl9pbnB1dEVycm9yQ2xhc3MiLCJpbnB1dEVycm9yQ2xhc3MiLCJfZXJyb3JDbGFzcyIsImVycm9yQ2xhc3MiLCJfZm9ybSIsIl9idXR0b25FbGVtZW50IiwicXVlcnlTZWxlY3RvciIsIl9pbnB1dEVsZW1lbnRzIiwicXVlcnlTZWxlY3RvckFsbCIsIl9zaG93SW5wdXRFcnJvciIsImlucHV0RWxlbWVudCIsImVycm9yTWVzc2FnZUVsZW0iLCJpZCIsImNsYXNzTGlzdCIsImFkZCIsInRleHRDb250ZW50IiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJfaGlkZUlucHV0RXJyb3IiLCJyZW1vdmUiLCJyZXNldFZhbGlkYXRpb24iLCJmb3JFYWNoIiwidG9nZ2xlQnV0dG9uU3RhdGUiLCJfaGFzSW52YWxpZElucHV0IiwiX2Rpc2FibGVCdXR0b24iLCJfZW5hYmxlQnV0dG9uIiwic29tZSIsInZhbGlkaXR5IiwidmFsaWQiLCJfY2hlY2tJbnB1dFZhbGlkaXR5IiwiZGlzYWJsZWQiLCJfc2V0RXZlbnRMaXN0ZW5lcnMiLCJhZGRFdmVudExpc3RlbmVyIiwiZW5hYmxlVmFsaWRhdGlvbiIsImV2dCIsInByZXZlbnREZWZhdWx0IiwiQ2FyZCIsImNhcmREYXRhIiwiY2FyZFNlbGVjdG9yIiwiaGFuZGxlQ2FyZENsaWNrIiwiX25hbWUiLCJuYW1lIiwiX2xpbmsiLCJsaW5rIiwiX2NhcmRTZWxlY3RvciIsIl9oYW5kbGVDYXJkQ2xpY2siLCJfZ2V0VGVtcGxhdGUiLCJfY2FyZFRlbXBsYXRlIiwiZG9jdW1lbnQiLCJjb250ZW50IiwiY2xvbmVOb2RlIiwiX3RvZ2dsZUxpa2VCdXR0b24iLCJfY2FyZEVsZW1lbnQiLCJ0b2dnbGUiLCJfZGVsZXRlQ2FyZCIsImdlbmVyYXRlQ2FyZCIsImFsdCIsInNyYyIsIlBvcHVwIiwiX3JlZiIsInBvcHVwU2VsZWN0b3IiLCJfcG9wdXBFbGVtZW50IiwiX2hhbmRsZUVzY0Nsb3NlIiwiYmluZCIsIl9jbG9zZUNsaWNrIiwib3BlbiIsImNsb3NlIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImV2ZW50Iiwia2V5IiwiZSIsInRhcmdldCIsImNvbnRhaW5zIiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJQb3B1cFdpdGhGb3JtIiwiaGFuZGxlRm9ybVN1Ym1pdCIsInN1cGVyIiwiX2hhbmRsZUZvcm1TdWJtaXQiLCJfcG9wdXBGb3JtIiwiX2dldElucHV0VmFsdWVzIiwiaW5wdXRzIiwidmFsdWVzIiwiaW5wdXQiLCJ2YWx1ZSIsImlucHV0VmFsdWVzIiwicmVzZXQiLCJwcm9maWxlRWRpdE1vZGFsIiwicHJvZmlsZUFkZE1vZGFsIiwicHJvZmlsZUVkaXRCdG4iLCJwcm9maWxlQWRkQnRuIiwicHJvZmlsZURlc2NyaXB0aW9uSW5wdXQiLCJwcm9maWxlVGl0bGVJbnB1dCIsInByZXZpZXdJbWFnZU1vZGFsIiwidmFsaWRhdGlvblNldHRpbmdzIiwiZWRpdEZvcm1WYWxpZGF0b3IiLCJGb3JtVmFsaWRhdG9yIiwiYWRkRm9ybVZhbGlkYXRvciIsInVzZXJJbmZvIiwibmFtZVNlbGVjdG9yIiwiam9iU2VsZWN0b3IiLCJuYW1lRWxlbWVudCIsImpvYkVsZW1lbnQiLCJnZXRVc2VySW5mbyIsImpvYiIsInNldFVzZXJJbmZvIiwiX3JlZjIiLCJ0aXRsZSIsImVkaXRQcm9maWxlUG9wdXAiLCJkZXNjcmlwdGlvbiIsImNhcmRMaXN0U2VjdGlvbiIsImNvbnRhaW5lclNlbGVjdG9yIiwiaXRlbXMiLCJyZW5kZXJlciIsIl9yZW5kZXJJdGVtcyIsIl9yZW5kZXJlciIsIl9jb250YWluZXIiLCJyZW5kZXJJdGVtcyIsIml0ZW0iLCJhZGRJdGVtIiwiZWxlbWVudCIsImFwcGVuZCIsInByZXBlbmRJdGVtIiwicHJlcGVuZCIsIm5ld0NhcmQiLCJjcmVhdGVDYXJkIiwibmV3Q2FyZFBvcHVwIiwiX3JlZjUiLCJ1cmwiLCJwcmV2aWV3SW1hZ2VQb3B1cCIsIl9wcmV2aWV3SW1hZ2VFbGVtZW50IiwiX3ByZXZpZXdJbWFnZUNhcHRpb24iLCJfcmVmMyIsImNhcmRFbGVtZW50IiwiX3JlZjQiXSwic291cmNlUm9vdCI6IiJ9